# Sample File Upload App

Приложение для управления пользователями и загрузки файлов с поддержкой JWT-аутентификации и сессий.

## Установка
1. Клонируйте репозиторий:
```
git clone <repo-url>
cd sample-fileupload-app
```

2. Установите зависимости:
```
cd ./backend
npm install
```

3. Запустите контейнеры через Docker Compose:
```
cd ..
docker compose up -d
```

Сервер будет доступен по адресу:
```
http://localhost:3000
```

Приложение можно также запустить локально:
```
cd ./backend
npm run start
```
В этом случае сервер будет доступен по адресу
```
http://localhost:3001
```

## Маршруты API

### Аутентификация
| Метод | URL                 | Описание                                      | Параметры                            |
| ----- | ------------------- | --------------------------------------------- | ------------------------------------ |
| POST  | `/signin`           | Вход пользователя и получение JWT             | `id` (email или телефон), `password` |
| POST  | `/signin/new_token` | Обновление access токена по refresh токену    | `refreshToken`                       |
| POST  | `/signup`           | Регистрация нового пользователя               | `id` (email или телефон), `password`                     |
| GET   | `/info`             | Получение данных авторизованного пользователя | JWT в `Authorization` заголовке      |
| GET   | `/logout`           | Выход пользователя (отзыв текущих токенов)    | JWT в `Authorization` заголовке      |

### Работа с файлами

| Метод  | URL                  | Описание                             | Параметры                          |
| ------ | -------------------- | ------------------------------------ | ---------------------------------- |
| POST   | `/file/upload`       | Загрузка нового файла                | `file` (multipart/form-data)       |
| PUT    | `/file/update/:id`   | Обновление существующего файла       | `file` (multipart/form-data), `id` |
| GET    | `/file/list`         | Получение списка файлов с пагинацией | query: `page`, `list_size`         |
| GET    | `/file/:id`          | Получение информации о файле по id   |                                    |
| GET    | `/file/download/:id` | Скачивание файла по id               |                                    |
| DELETE | `/file/delete/:id`   | Удаление файла по id                 |                                    |

## Тестирование
Запуск тестов с покрытием:
```
npm run test:coverage
```